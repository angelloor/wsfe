<div class="relative flex flex-col w-full h-full">

    <!-- Header -->
    <div class="flex flex-0 items-center justify-between h-16 pr-3 sm:pr-5 pl-6 sm:pl-8 bg-primary text-on-primary">
        <div class="text-lg">Configuración de la empresa</div>
        <button mat-icon-button (click)="closeSettingsCompany()" [tabIndex]="-1">
            <mat-icon class="text-current" [svgIcon]="'heroicons_outline:x'"></mat-icon>
        </button>
    </div>
    <!-- Type validation form -->
    <div class="flex flex-col flex-auto p-6 sm:p-8 overflow-y-auto">
        <div class="flex flex-col w-full">
            <!-- View mode -->
            <ng-container *ngIf="!editMode">
                <!-- Entity -->
                <div class="relative flex flex-col flex-auto items-center">
                    <div class="w-full max-w-3xl">
                        <!-- Actions -->
                        <div class="flex items-center py-4 py-0 dark:bg-transparent rounded-t-none rounded-b-2xl">
                            <button mat-stroked-button (click)="byCompanyReleaseAll()">
                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:logout'"></mat-icon>
                                <span class="ml-1">Cerrar sesiones</span>
                            </button>
                            <button mat-stroked-button (click)="toggleEditMode(true)" class="ml-auto">
                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil-alt'"></mat-icon>
                                <span class="ml-1">Editar</span>
                            </button>
                        </div>
                        <div class="flex flex-col space-y-8">
                            <div class="flex flex-auto mt-8">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- name_company -->
                                    <ng-container *ngIf="company.name_company">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:office-building'"></mat-icon>
                                            <div class="ml-6 leading-6">{{company.name_company}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- acronym_company -->
                                    <ng-container *ngIf="company.acronym_company">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:ticket'"></mat-icon>
                                            <div class="ml-6 leading-6">{{company.acronym_company}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="flex flex-auto mt-8">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- address_company -->
                                    <ng-container *ngIf="company.address_company">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:location-marker'"></mat-icon>
                                            <div class="ml-6 leading-6">{{company.address_company}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- status_company -->
                                    <ng-container>
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:status-online'"></mat-icon>
                                            <div *ngIf="company.status_company"
                                                class="ml-6 mt-1 w-3 h-3 bg-green-700 rounded-full">
                                            </div>
                                            <div *ngIf="!company.status_company"
                                                class="ml-6 mt-1 w-3 h-3 bg-red-600 rounded-full">
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>

                            <div class="flex flex-auto mt-8">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- expiration_token -->
                                    <ng-container *ngIf="company.setting.expiration_token">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:clock'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.expiration_token}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- expiration_verification_code -->
                                    <ng-container *ngIf="company.setting.expiration_verification_code">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:clock'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.expiration_verification_code}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>

                            <div class="flex flex-auto mt-8">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- inactivity_time -->
                                    <ng-container *ngIf="company.setting.inactivity_time">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:clock'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.inactivity_time}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- session_limit -->
                                    <ng-container *ngIf="company.setting.session_limit">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:hashtag'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.session_limit}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="flex flex-auto mt-8">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- save_alfresco -->
                                    <ng-container>
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:status-online'"></mat-icon>
                                            <div *ngIf="company.setting.save_alfresco"
                                                class="ml-6 mt-1 w-3 h-3 bg-green-700 rounded-full">
                                            </div>
                                            <div *ngIf="!company.setting.save_alfresco"
                                                class="ml-6 mt-1 w-3 h-3 bg-red-600 rounded-full">
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- query_environment -->
                                    <ng-container *ngIf="query_environment">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:globe'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{getTypeSelectTypeEnvironment(query_environment).name_type}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="flex flex-auto mt-8">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- wait_autorization -->
                                    <ng-container *ngIf="company.setting.wait_autorization">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:clock'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.wait_autorization}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- batch_shipping -->
                                    <ng-container>
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:status-online'"></mat-icon>
                                            <div *ngIf="company.setting.batch_shipping"
                                                class="ml-6 mt-1 w-3 h-3 bg-green-700 rounded-full">
                                            </div>
                                            <div *ngIf="!company.setting.batch_shipping"
                                                class="ml-6 mt-1 w-3 h-3 bg-red-600 rounded-full">
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="flex flex-auto mt-8" *ngIf="companyForm.getRawValue().batch_shipping">
                                <div class="flex flex-col w-2/4 pr-3">
                                    <!-- max_generation_pdf -->
                                    <ng-container *ngIf="company.setting.max_generation_pdf">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:hashtag'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.max_generation_pdf}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="flex flex-col w-2/4 pl-3">
                                    <!-- wait_generation_pdf -->
                                    <ng-container *ngIf="company.setting.wait_generation_pdf">
                                        <div class="flex sm:items-center">
                                            <mat-icon [svgIcon]="'heroicons_outline:clock'"></mat-icon>
                                            <div class="ml-6 leading-6">
                                                {{company.setting.wait_generation_pdf}}</div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>

            <!-- Edit mode -->
            <ng-container *ngIf="editMode">
                <!-- form -->
                <div class="flex flex-col md:flex-col flex-auto justify-between">
                    <!-- Actions -->
                    <div class="flex items-center py-4 py-0 dark:bg-transparent rounded-t-none rounded-b-2xl">
                        <!-- Save -->
                        <button mat-flat-button [color]="'primary'" [disabled]="companyForm.invalid"
                            [matTooltip]="'Guardar'" (click)="updateCompany()">
                            Guardar
                        </button>
                        <!-- Cancel -->
                        <button mat-stroked-button class="ml-auto" [matTooltip]="'Cancelar'"
                            (click)="toggleEditMode(false)">
                            Cancelar
                        </button>
                    </div>
                    <form [formGroup]="companyForm">
                        <!-- Alert -->
                        <angel-alert class="mt-8" *ngIf="companyForm.invalid || showAlert" [appearance]="'outline'"
                            [showIcon]="false" [type]="alert.type" [@shake]="alert.type === 'error'">
                            <!-- Message if alert is actived for the component -->
                            {{alert.message}}
                            <!-- name_company -->
                            <mat-error *ngIf="companyForm.get('name_company')?.hasError('required')">
                                • Ingrese el nombre de la empresa
                            </mat-error>
                            <!-- acronym_company -->
                            <mat-error *ngIf="companyForm.get('acronym_company')?.hasError('required')">
                                • Ingrese el acrónimo de la empresa
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('acronym_company')?.hasError('minlength')">
                                • Valor minimo del acrónimo 5 caracteres
                            </mat-error>

                            <!-- address_company -->
                            <mat-error *ngIf="companyForm.get('address_company')?.hasError('required')">
                                • Ingrese la dirección de la empresa
                            </mat-error>
                            <!-- status_company -->
                            <mat-error *ngIf="companyForm.get('status_company')?.hasError('required')">
                                • Seleccione el estado de la empresa
                            </mat-error>

                            <!-- expiration_token -->
                            <mat-error *ngIf="companyForm.get('expiration_token')?.hasError('required')">
                                • Ingrese el tiempo de expiración del token
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('expiration_token')?.hasError('max')">
                                • Valor máximo de expiración del token 9999999999 segundos
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('expiration_token')?.hasError('min')">
                                • Valor mínimo de expiración del token 60 segundos
                            </mat-error>

                            <!-- expiration_verification_code -->
                            <mat-error *ngIf="companyForm.get('expiration_verification_code')?.hasError('required')">
                                • Ingrese el tiempo de expiración del código de verificación del token
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('expiration_verification_code')?.hasError('max')">
                                • Valor máximo de expiración del código 9999999999 segundos
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('expiration_verification_code')?.hasError('min')">
                                • Valor mínimo de expiración del código 60 segundos
                            </mat-error>

                            <!-- inactivity_time -->
                            <mat-error *ngIf="companyForm.get('inactivity_time')?.hasError('required')">
                                • Ingrese el tiempo máximo de inactividad
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('inactivity_time')?.hasError('max')">
                                • Valor máximo de inactividad 9999999999 segundos
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('inactivity_time')?.hasError('min')">
                                • Valor mínimo de inactividad 60 segundos
                            </mat-error>

                            <!-- session_limit -->
                            <mat-error *ngIf="companyForm.get('session_limit')?.hasError('required')">
                                • Ingrese el limite de sesiones por usuario
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('session_limit')?.hasError('max')">
                                • Valor máximo de sesiones 99
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('session_limit')?.hasError('min')">
                                • Valor mínimo de sesiones 1
                            </mat-error>

                            <!-- save_alfresco -->
                            <mat-error *ngIf="companyForm.get('save_alfresco')?.hasError('required')">
                                • Seleccione alfresco
                            </mat-error>
                            <!-- wait_autorization -->
                            <mat-error *ngIf="companyForm.get('wait_autorization')?.hasError('required')">
                                • Ingrese el tiempo de espera para la autorización
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('wait_autorization')?.hasError('max')">
                                • Valor máximo del tiempo de espera para la autorización 9999999 segundos
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('wait_autorization')?.hasError('min')">
                                • Valor mínimo del tiempo de espera para la autorización 3 segundos
                            </mat-error>

                            <!-- batch_shipping -->
                            <mat-error *ngIf="companyForm.get('batch_shipping')?.hasError('required')">
                                • Seleccione envío por lote
                            </mat-error>
                            <!-- max_generation_pdf -->
                            <mat-error *ngIf="companyForm.get('max_generation_pdf')?.hasError('required')">
                                • Ingrese la cantidad máxima por lote
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('max_generation_pdf')?.hasError('max')">
                                • Valor máximo de la cantidad máxima por lote 999 comprobantes
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('max_generation_pdf')?.hasError('min')">
                                • Valor mínimo de la cantidad máxima por lote 5 comprobantes
                            </mat-error>

                            <!-- wait_generation_pdf -->
                            <mat-error *ngIf="companyForm.get('wait_generation_pdf')?.hasError('required')">
                                • Ingrese el tiempo de espera entre envío por lotes
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('wait_generation_pdf')?.hasError('max')">
                                • Valor máximo del tiempo de espera entre envío por lotes 9999999 segundos
                            </mat-error>
                            <mat-error *ngIf="companyForm.get('wait_generation_pdf')?.hasError('min')">
                                • Valor mínimo del tiempo de espera entre envío por lotes 5 segundos
                            </mat-error>
                        </angel-alert>
                        <!-- Alert -->
                        <div class="flex flex-auto mt-8">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- name_company -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Nombre</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:office-building'">
                                        </mat-icon>
                                        <input matInput maxlength="100" [formControlName]="'name_company'"
                                            [placeholder]="'Ingrese el nombre de la empresa'" [spellcheck]="true">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- acronym_company -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Acrónimo</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:ticket'">
                                        </mat-icon>
                                        <input matInput maxlength="50" [formControlName]="'acronym_company'"
                                            [placeholder]="'Ingrese el acrónimo de la empresa'" [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <!-- Alert -->
                        <div class="flex flex-auto mt-8">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- address_company -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Dirección</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:location-marker'">
                                        </mat-icon>
                                        <input matInput maxlength="250" [formControlName]="'address_company'"
                                            [placeholder]="'Ingrese la dirección de la empresa'" [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- status_company -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Estado</mat-label>
                                        <mat-select [formControlName]="'status_company'">
                                            <mat-option [value]=" true">Activo</mat-option>
                                            <mat-option [value]="false">Inactivo</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-auto mt-8">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- expiration_token -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Expiración del token</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:clock'">
                                        </mat-icon>
                                        <span matSuffix>Segundos</span>
                                        <input class="delete_arrow" matInput [formControlName]="'expiration_token'"
                                            type="number" max="9999999999"
                                            [placeholder]="'Ingrese la expiración del token'" [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- expiration_verification_code -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Expiración del código de verificación</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:clock'">
                                        </mat-icon>
                                        <span matSuffix>Segundos</span>
                                        <input matInput [formControlName]="'expiration_verification_code'" type="number"
                                            max="9999999999"
                                            [placeholder]="'Ingrese la expiración del código de verificación'"
                                            [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-auto mt-8">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- inactivity_time -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Tiempo de inactividad</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:clock'">
                                        </mat-icon>
                                        <span matSuffix>Segundos</span>
                                        <input matInput [formControlName]="'inactivity_time'" type="number"
                                            max="9999999999" [placeholder]="'Ingrese el tiempo de inactividad'"
                                            [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- session_limit -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Limite de sesiones</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:login'">
                                        </mat-icon>
                                        <input matInput [formControlName]="'session_limit'" type="number" max="99"
                                            [placeholder]="'Ingrese el limite de sesiones'" [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-auto mt-8">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- save_alfresco -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Alfresco</mat-label>
                                        <mat-select [formControlName]="'save_alfresco'">
                                            <mat-option [value]=" true">Activo</mat-option>
                                            <mat-option [value]="false">Inactivo</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- query_environment -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Ambiente de consulta</mat-label>
                                        <mat-select [formControlName]="'query_environment'"
                                            (selectionChange)="changeQueryEnvironment()">
                                            <ng-container *ngFor="let type of typeEnvironment">
                                                <mat-option [value]="type.value_type">
                                                    {{type.name_type}}</mat-option>
                                            </ng-container>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-auto mt-8">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- wait_autorization -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Tiempo de espera</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:clock'">
                                        </mat-icon>
                                        <span matSuffix>Segundos</span>
                                        <input matInput [formControlName]="'wait_autorization'" type="number"
                                            max="9999999" min="3"
                                            [placeholder]="'Ingrese el tiempo de espera para la autorización'"
                                            [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- batch_shipping -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Envío por lote</mat-label>
                                        <mat-select [formControlName]="'batch_shipping'">
                                            <mat-option [value]=" true">Activo</mat-option>
                                            <mat-option [value]="false">Inactivo</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-auto mt-8" *ngIf="companyForm.getRawValue().batch_shipping">
                            <div class="flex flex-col w-2/4 pr-3">
                                <!-- max_generation_pdf -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Cantidad máxima</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:hashtag'">
                                        </mat-icon>
                                        <span matSuffix>Comprobantes por lote</span>
                                        <input matInput [formControlName]="'max_generation_pdf'" type="number" max="999"
                                            min="1" [placeholder]="'Ingrese la cantidad máxima por lote'"
                                            [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="flex flex-col w-2/4 pl-3">
                                <!-- wait_generation_pdf -->
                                <div>
                                    <mat-form-field class="angel-mat-no-subscript w-full">
                                        <mat-label>Tiempo de espera</mat-label>
                                        <mat-icon matPrefix class="hidden sm:flex icon-size-5"
                                            [svgIcon]="'heroicons_solid:clock'">
                                        </mat-icon>
                                        <span matSuffix>Segundos</span>
                                        <input matInput [formControlName]="'wait_generation_pdf'" max="9999999" min="5"
                                            [placeholder]="'Ingrese el tiempo de espera entre envío por lotes'"
                                            [spellcheck]="false">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </ng-container>
        </div>
    </div>
</div>